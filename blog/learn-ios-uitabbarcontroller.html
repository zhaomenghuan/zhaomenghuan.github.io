<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iOS 学习笔记之基于 UITabBarController 的主流 APP 底部导航栏实现 | 匠心博客</title>
    <meta name="description" content="小青年,匠心,小青年博客,匠心博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.685c010a.css" as="style"><link rel="preload" href="/assets/js/app.f3e141ba.js" as="script"><link rel="preload" href="/assets/js/70.80f1252b.js" as="script"><link rel="preload" href="/assets/js/18.c373a36e.js" as="script"><link rel="preload" href="/assets/js/34.124c31c0.js" as="script"><link rel="prefetch" href="/assets/js/1.1950ec81.js"><link rel="prefetch" href="/assets/js/10.7f857e71.js"><link rel="prefetch" href="/assets/js/100.e03c01d2.js"><link rel="prefetch" href="/assets/js/101.7b790a2f.js"><link rel="prefetch" href="/assets/js/102.a7aa77f9.js"><link rel="prefetch" href="/assets/js/103.d473991c.js"><link rel="prefetch" href="/assets/js/104.9fe8785c.js"><link rel="prefetch" href="/assets/js/105.7291ae49.js"><link rel="prefetch" href="/assets/js/106.2c35a2f4.js"><link rel="prefetch" href="/assets/js/107.a71ccb64.js"><link rel="prefetch" href="/assets/js/108.9d6f54a8.js"><link rel="prefetch" href="/assets/js/109.e77d12ca.js"><link rel="prefetch" href="/assets/js/11.5378ae65.js"><link rel="prefetch" href="/assets/js/12.9aca40f8.js"><link rel="prefetch" href="/assets/js/13.ce2b655c.js"><link rel="prefetch" href="/assets/js/14.7488ca24.js"><link rel="prefetch" href="/assets/js/15.9c07ac98.js"><link rel="prefetch" href="/assets/js/16.8f57294c.js"><link rel="prefetch" href="/assets/js/17.4f7ae4ec.js"><link rel="prefetch" href="/assets/js/19.c7be2474.js"><link rel="prefetch" href="/assets/js/2.7f7e5268.js"><link rel="prefetch" href="/assets/js/20.f8833113.js"><link rel="prefetch" href="/assets/js/21.e71dd521.js"><link rel="prefetch" href="/assets/js/22.92dc7b77.js"><link rel="prefetch" href="/assets/js/23.285557d3.js"><link rel="prefetch" href="/assets/js/24.a803551c.js"><link rel="prefetch" href="/assets/js/25.dbeaa19d.js"><link rel="prefetch" href="/assets/js/26.9ca97076.js"><link rel="prefetch" href="/assets/js/27.d1a2911b.js"><link rel="prefetch" href="/assets/js/28.25c216b3.js"><link rel="prefetch" href="/assets/js/29.9dc30af4.js"><link rel="prefetch" href="/assets/js/30.1e9d6e06.js"><link rel="prefetch" href="/assets/js/31.3d7dbe62.js"><link rel="prefetch" href="/assets/js/32.36371ba7.js"><link rel="prefetch" href="/assets/js/33.78edc66d.js"><link rel="prefetch" href="/assets/js/35.a5470008.js"><link rel="prefetch" href="/assets/js/36.acde7543.js"><link rel="prefetch" href="/assets/js/37.f6648812.js"><link rel="prefetch" href="/assets/js/38.1885784f.js"><link rel="prefetch" href="/assets/js/39.af4b4bbd.js"><link rel="prefetch" href="/assets/js/4.61024115.js"><link rel="prefetch" href="/assets/js/40.ec6e88a9.js"><link rel="prefetch" href="/assets/js/41.67d4e8b7.js"><link rel="prefetch" href="/assets/js/42.7de428af.js"><link rel="prefetch" href="/assets/js/43.b4f51fa8.js"><link rel="prefetch" href="/assets/js/44.487d119d.js"><link rel="prefetch" href="/assets/js/45.2206665b.js"><link rel="prefetch" href="/assets/js/46.125163cc.js"><link rel="prefetch" href="/assets/js/47.8722f507.js"><link rel="prefetch" href="/assets/js/48.b8bfe77f.js"><link rel="prefetch" href="/assets/js/49.77fac897.js"><link rel="prefetch" href="/assets/js/5.3395f0b5.js"><link rel="prefetch" href="/assets/js/50.d68289a2.js"><link rel="prefetch" href="/assets/js/51.d9d70556.js"><link rel="prefetch" href="/assets/js/52.6a2c9e02.js"><link rel="prefetch" href="/assets/js/53.ff13cf8b.js"><link rel="prefetch" href="/assets/js/54.7e844902.js"><link rel="prefetch" href="/assets/js/55.80aa3d86.js"><link rel="prefetch" href="/assets/js/56.a4124774.js"><link rel="prefetch" href="/assets/js/57.55eb7355.js"><link rel="prefetch" href="/assets/js/58.7d0e2bc5.js"><link rel="prefetch" href="/assets/js/59.9cdd695c.js"><link rel="prefetch" href="/assets/js/6.77e8533c.js"><link rel="prefetch" href="/assets/js/60.54318be9.js"><link rel="prefetch" href="/assets/js/61.82e1ea82.js"><link rel="prefetch" href="/assets/js/62.b065e499.js"><link rel="prefetch" href="/assets/js/63.bb770dde.js"><link rel="prefetch" href="/assets/js/64.996fdbfd.js"><link rel="prefetch" href="/assets/js/65.54f3baf3.js"><link rel="prefetch" href="/assets/js/66.38d28ab3.js"><link rel="prefetch" href="/assets/js/67.5cf5a3bc.js"><link rel="prefetch" href="/assets/js/68.f2418476.js"><link rel="prefetch" href="/assets/js/69.162d06c4.js"><link rel="prefetch" href="/assets/js/7.a2cd9d6c.js"><link rel="prefetch" href="/assets/js/71.970dda3c.js"><link rel="prefetch" href="/assets/js/72.a073c997.js"><link rel="prefetch" href="/assets/js/73.674106d1.js"><link rel="prefetch" href="/assets/js/74.a0336873.js"><link rel="prefetch" href="/assets/js/75.37fbb329.js"><link rel="prefetch" href="/assets/js/76.a9439343.js"><link rel="prefetch" href="/assets/js/77.d52439f1.js"><link rel="prefetch" href="/assets/js/78.fbffcd6c.js"><link rel="prefetch" href="/assets/js/79.c6d73001.js"><link rel="prefetch" href="/assets/js/8.f0af9f9c.js"><link rel="prefetch" href="/assets/js/80.eab87966.js"><link rel="prefetch" href="/assets/js/81.9931436f.js"><link rel="prefetch" href="/assets/js/82.b29080c9.js"><link rel="prefetch" href="/assets/js/83.d94ed517.js"><link rel="prefetch" href="/assets/js/84.600be30f.js"><link rel="prefetch" href="/assets/js/85.a6938cc3.js"><link rel="prefetch" href="/assets/js/86.7dec6ed4.js"><link rel="prefetch" href="/assets/js/87.5d2c1dc9.js"><link rel="prefetch" href="/assets/js/88.8f2410d4.js"><link rel="prefetch" href="/assets/js/89.fe8c04e8.js"><link rel="prefetch" href="/assets/js/9.f542ab97.js"><link rel="prefetch" href="/assets/js/90.f25166a8.js"><link rel="prefetch" href="/assets/js/91.038ee701.js"><link rel="prefetch" href="/assets/js/92.19e610e0.js"><link rel="prefetch" href="/assets/js/93.22cd83c8.js"><link rel="prefetch" href="/assets/js/94.7495cfa6.js"><link rel="prefetch" href="/assets/js/95.f149c41d.js"><link rel="prefetch" href="/assets/js/96.cee91e1f.js"><link rel="prefetch" href="/assets/js/97.27a1bb57.js"><link rel="prefetch" href="/assets/js/98.67d4f125.js"><link rel="prefetch" href="/assets/js/99.35daa60c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.685c010a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">匠心博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>iOS 学习笔记之基于 UITabBarController 的主流 APP 底部导航栏实现</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/learn-ios-uitabbarcontroller.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/learn-ios-uitabbarcontroller.html#uiwindow-和-uiviewcontroller-的基本内容" class="sidebar-link">UIWindow 和 UIViewController 的基本内容</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/learn-ios-uitabbarcontroller.html#uinavigationcontroller-和-uitabbarcontroller-的基本内容" class="sidebar-link">UINavigationController 和 UITabBarController 的基本内容</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/learn-ios-uitabbarcontroller.html#项目实战" class="sidebar-link">项目实战</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/learn-ios-uitabbarcontroller.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="ios-学习笔记之基于-uitabbarcontroller-的主流-app-底部导航栏实现">iOS 学习笔记之基于 UITabBarController 的主流 APP 底部导航栏实现</h1> <h2 id="前言">前言</h2> <p>当app中有多个控制器的时候，就需要对这些控制器进行管理，用一个控制器去管理其他多个控制器；如图所示：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-3be16f199bca141e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p> <p>IOS UIView 提供了两个特殊的控制器，UINavigationController和UITabBarController去管理其它控制器。</p> <p>本文以下面的一个简单例子加以说明基本用法：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-502621fb3f1db021.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p> <h2 id="uiwindow-和-uiviewcontroller-的基本内容">UIWindow 和 UIViewController 的基本内容</h2> <p>新建一个 Single View Application 工程，在iOS应用中，每个程序得main函数中都调用了UIApplicationMain函数。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token expression"><span class="token operator">&lt;</span>UIKit<span class="token operator">/</span>UIKit<span class="token punctuation">.</span>h<span class="token operator">&gt;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">import</span> <span class="token string">&quot;AppDelegate.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">@</span>autoreleasepool <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">UIApplicationMain</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> nil<span class="token punctuation">,</span> <span class="token function">NSStringFromClass</span><span class="token punctuation">(</span><span class="token punctuation">[</span>AppDelegate class<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>先来看看UIApplicationMain函数的原型：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>UIKIT_EXTERN <span class="token keyword">int</span> <span class="token function">UIApplicationMain</span><span class="token punctuation">(</span>
  <span class="token keyword">int</span> argc<span class="token punctuation">,</span> 
  <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  NSString <span class="token operator">*</span> __nullable principalClassName<span class="token punctuation">,</span> 
  NSString <span class="token operator">*</span> __nullable delegateClassName
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>前面的argc和argv是ISO C标准的main函数的参数，直接传递给UIApplicationMain进行相关处理，principalClassName是应用程序类的名字，该类必须继承自UIApplication类，而delegateClassName是应用程序类的代理类。如果主要nib文件（在info.plist文件中指定，key是NSMainNibFile）存在，就会在nib文件对象里寻找Application对象和连接它的delegate。此函数会根据principalClassName创建UIApplication对象，然后根据delegateClassName创建一个delegate对象，并将UIApplication对象中的delegate属性设置为delegate对象，接着会建立应用的main runloop，进行事件的处理，首先调用<code>application:didFinishLaunchingWithOptions</code>。程序正常退出时才返回（如今iOS支持后台运行，系统在必要时会强行杀死不用的进程，一般这个函数不等返回进程就终止了）。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">// 程序启动完成调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions <span class="token punctuation">{</span>
    <span class="token comment">// 创建Window</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UIWindow alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>UIScreen mainScreen<span class="token punctuation">]</span> bounds<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置Window的背景颜色</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token punctuation">[</span>UIColor whiteColor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 设置根控制器</span>
    ViewController <span class="token operator">*</span>vc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>rootViewController <span class="token operator">=</span> vc<span class="token punctuation">;</span>

    <span class="token comment">// 设置并显示主窗口</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>window makeKeyAndVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> YES<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>UIWindow是一种特殊的UIView，通常在一个应用中只会有一个UIWindow。在ios程序启动完成后，建立的第一个视图控件就是UIWindow，接着创建一个控制器的View，最后将控制器的View添加到UIWindow上，于是控制器的View就是显示到屏幕上了。一个ios程序之所以能显示在屏幕上，完全是因为它有UIWindow，也就是说没有UIWindow就看不到任何UI界面。</p> <p><strong>控制器的创建：</strong></p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>UIViewController <span class="token operator">*</span>vc <span class="token operator">=</span> <span class="token punctuation">[</span>UIViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>可以用isViewLoaded方法判断一个UIViewController的view是否已经被加载；控制器的view加载完毕就会调用viewDidLoad方法。</p> <p><strong>将view添加到UIWindow：</strong></p> <ul><li>直接将view添加到UIWindow中，并不理会view对应的控制器。</li></ul> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addSubView<span class="token punctuation">:</span><span class="token punctuation">(</span>UIView <span class="token operator">*</span><span class="token punctuation">)</span>view<span class="token punctuation">;</span>
</code></pre></div><ul><li>通过设置根控制器，自动将rootViewController的view添加到UIWindow中，负责管理rootViewController的生命周期。</li></ul> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@property</span><span class="token punctuation">(</span>nonatomic<span class="token punctuation">,</span>retain<span class="token punctuation">)</span> UIViewController <span class="token operator">*</span>rootViewController<span class="token punctuation">;</span>
</code></pre></div><p><strong>获取 RootViewController：</strong></p> <p>第一种方法：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>UIWindow <span class="token operator">*</span>window <span class="token operator">=</span> <span class="token punctuation">[</span>UIApplication sharedApplication<span class="token punctuation">]</span><span class="token punctuation">.</span>keyWindow<span class="token punctuation">;</span>
UIViewController <span class="token operator">*</span>rootViewController <span class="token operator">=</span> window<span class="token punctuation">.</span>rootViewController<span class="token punctuation">;</span>
</code></pre></div><p>第二种方法：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>AppDelegate <span class="token operator">*</span>appdelegate <span class="token operator">=</span> <span class="token punctuation">(</span>AppDelegate <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">[</span>UIApplication sharedApplication<span class="token punctuation">]</span><span class="token punctuation">.</span>delegate<span class="token punctuation">;</span>
UIViewController <span class="token operator">*</span>rootViewController <span class="token operator">=</span> appdelegate<span class="token punctuation">.</span>window<span class="token punctuation">.</span>rootViewController<span class="token punctuation">;</span>
</code></pre></div><h2 id="uinavigationcontroller-和-uitabbarcontroller-的基本内容">UINavigationController 和 UITabBarController 的基本内容</h2> <p>UINavigationController以栈的形式保存子控制器，使用push方法能将某个控制器压入栈，使用pop方法可以移除栈顶控制器。</p> <p>打开 ViewController 的方式：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>pushViewController<span class="token punctuation">:</span><span class="token punctuation">(</span>UIViewController<span class="token operator">*</span><span class="token punctuation">)</span>viewController animated<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>animated<span class="token punctuation">;</span>
</code></pre></div><p>三种移除 ViewController 的方式：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>将栈顶的控制器移除
<span class="token operator">-</span> <span class="token punctuation">(</span>UIViewController<span class="token operator">*</span><span class="token punctuation">)</span>popViewControllerAnimated<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>animated<span class="token punctuation">;</span>
回到指定的子控制器
<span class="token operator">-</span> <span class="token punctuation">(</span>NSArray<span class="token operator">*</span><span class="token punctuation">)</span>popToViewController<span class="token punctuation">:</span><span class="token punctuation">(</span>UIViewController<span class="token operator">*</span><span class="token punctuation">)</span>viewController animated<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>animated<span class="token punctuation">;</span>
回到根控制器（栈底控制器）
<span class="token operator">-</span> <span class="token punctuation">(</span>NSArray<span class="token operator">*</span><span class="token punctuation">)</span>popToRootViewControllerAnimated<span class="token punctuation">:</span><span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>animated<span class="token punctuation">;</span>
</code></pre></div><p><strong>初始化UINavigationController：</strong></p> <p>方法一：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>UINavigationController <span class="token operator">*</span>nv <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UINavigationController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>  
</code></pre></div><p>方法二：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>UINavigationController <span class="token operator">*</span>nv <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UINavigationController alloc<span class="token punctuation">]</span> initWithRootViewController<span class="token punctuation">:</span>rootViewController<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>UITabBarController和UINavigationController类似,UITabBarController也可以轻松地管理多个控制器,轻松完成控制器之间的切换,典型的例子就是QQ、微信等应⽤。但是UITabBarController其管理的视图一直存在,而UINavigationController在pop后会销毁掉，释放内存。UITabBarController通常作为整个程序的rootViewController，而且不能添加到别的container viewController中。</p> <p><strong>UITabBarController的使用步骤：</strong></p> <ol><li>初始化UITabBarController</li> <li>创建子控制器（viewcontroller）</li> <li>把子控制器添加到UITabBarController</li> <li>设置UIWindow的rootViewController为UITabBarController</li></ol> <p><strong>将子控制器添加到UITabBarController：</strong></p> <p>方法一：添加单个子控制器</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>addChildViewController<span class="token punctuation">:</span><span class="token punctuation">(</span>UIViewController<span class="token operator">*</span><span class="token punctuation">)</span>childController<span class="token punctuation">;</span>
</code></pre></div><p>方法二：添加多个子控制器</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>view<span class="token punctuation">.</span>viewControllers <span class="token operator">=</span> NSArray <span class="token operator">*</span>childController<span class="token punctuation">;</span>
</code></pre></div><p><strong>UITabBarController中嵌套UINavigationController：</strong></p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-a51008ed9f97d8db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p> <p><strong>UINavigationController中嵌套UITabBarController：</strong></p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-c5db0f3b168e6c44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p> <h2 id="项目实战">项目实战</h2> <p>将UITabBarController的逻辑提取到一个独立的ViewController中。可以新建一个继承于UITabBarController的ViewController。</p> <p><strong>AppDelegate.m：</strong></p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token comment">// 程序启动完成调用</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions <span class="token punctuation">{</span>
    <span class="token comment">// 创建Window</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UIWindow alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>UIScreen mainScreen<span class="token punctuation">]</span> bounds<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置Window的背景颜色</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token punctuation">[</span>UIColor whiteColor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 设置根控制器</span>
    ViewController <span class="token operator">*</span>vc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>window<span class="token punctuation">.</span>rootViewController <span class="token operator">=</span> vc<span class="token punctuation">;</span>

    <span class="token comment">// 设置并显示主窗口</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>window makeKeyAndVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> YES<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ViewController.h:</strong></p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token keyword">@interface</span> ViewController <span class="token punctuation">:</span> UITabBarController

<span class="token keyword">@end</span>
</code></pre></div><p><strong>ViewController.m:</strong></p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>viewDidLoad <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 创建子控制器</span>
    HomeViewController <span class="token operator">*</span>homeVC<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span>HomeViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> setTabBarItem<span class="token punctuation">:</span>homeVC<span class="token punctuation">.</span>tabBarItem
                  title<span class="token punctuation">:</span><span class="token string">@&quot;首页&quot;</span>
              titleSize<span class="token punctuation">:</span><span class="token number">13.0</span>
          titleFontName<span class="token punctuation">:</span><span class="token string">@&quot;HeiTi SC&quot;</span>
          selectedImage<span class="token punctuation">:</span><span class="token string">@&quot;i_tab_home_selected&quot;</span>
     selectedTitleColor<span class="token punctuation">:</span><span class="token punctuation">[</span>UIColor redColor<span class="token punctuation">]</span>
            normalImage<span class="token punctuation">:</span><span class="token string">@&quot;i_tab_home_normal&quot;</span>
       normalTitleColor<span class="token punctuation">:</span><span class="token punctuation">[</span>UIColor grayColor<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    BlogViewController <span class="token operator">*</span>blogVC<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span>BlogViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span> setTabBarItem<span class="token punctuation">:</span>blogVC<span class="token punctuation">.</span>tabBarItem
                  title<span class="token punctuation">:</span><span class="token string">@&quot;博文&quot;</span>
              titleSize<span class="token punctuation">:</span><span class="token number">13.0</span>
          titleFontName<span class="token punctuation">:</span><span class="token string">@&quot;HeiTi SC&quot;</span>
          selectedImage<span class="token punctuation">:</span><span class="token string">@&quot;i_tab_blog_selected&quot;</span>
     selectedTitleColor<span class="token punctuation">:</span><span class="token punctuation">[</span>UIColor redColor<span class="token punctuation">]</span>
            normalImage<span class="token punctuation">:</span><span class="token string">@&quot;i_tab_blog_normal&quot;</span>
       normalTitleColor<span class="token punctuation">:</span><span class="token punctuation">[</span>UIColor grayColor<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    UINavigationController <span class="token operator">*</span>homeNV <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UINavigationController alloc<span class="token punctuation">]</span> initWithRootViewController<span class="token punctuation">:</span>homeVC<span class="token punctuation">]</span><span class="token punctuation">;</span>
    UINavigationController <span class="token operator">*</span>blogNV <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UINavigationController alloc<span class="token punctuation">]</span> initWithRootViewController<span class="token punctuation">:</span>blogVC<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 把子控制器添加到UITabBarController</span>
    <span class="token keyword">self</span><span class="token punctuation">.</span>viewControllers <span class="token operator">=</span> <span class="token operator">@</span><span class="token punctuation">[</span>homeNV<span class="token punctuation">,</span> blogNV<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们通常需要对tabBarItem进行设置，可以封装一个setTabBarItem方法，只需要进行简单的配置即可。</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>setTabBarItem<span class="token punctuation">:</span><span class="token punctuation">(</span>UITabBarItem <span class="token operator">*</span><span class="token punctuation">)</span>tabbarItem
                title<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>title
            titleSize<span class="token punctuation">:</span><span class="token punctuation">(</span>CGFloat<span class="token punctuation">)</span>size
        titleFontName<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>fontName
        selectedImage<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>selectedImage
   selectedTitleColor<span class="token punctuation">:</span><span class="token punctuation">(</span>UIColor <span class="token operator">*</span><span class="token punctuation">)</span>selectColor
          normalImage<span class="token punctuation">:</span><span class="token punctuation">(</span>NSString <span class="token operator">*</span><span class="token punctuation">)</span>unselectedImage
     normalTitleColor<span class="token punctuation">:</span><span class="token punctuation">(</span>UIColor <span class="token operator">*</span><span class="token punctuation">)</span>unselectColor
<span class="token punctuation">{</span>
    
    <span class="token comment">//设置图片</span>
    tabbarItem <span class="token operator">=</span> <span class="token punctuation">[</span>tabbarItem initWithTitle<span class="token punctuation">:</span>title image<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>UIImage imageNamed<span class="token punctuation">:</span>unselectedImage<span class="token punctuation">]</span>imageWithRenderingMode<span class="token punctuation">:</span>UIImageRenderingModeAlwaysOriginal<span class="token punctuation">]</span> selectedImage<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>UIImage imageNamed<span class="token punctuation">:</span>selectedImage<span class="token punctuation">]</span>imageWithRenderingMode<span class="token punctuation">:</span>UIImageRenderingModeAlwaysOriginal<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// S未选中字体颜色</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>UITabBarItem appearance<span class="token punctuation">]</span> setTitleTextAttributes<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">{</span>NSForegroundColorAttributeName<span class="token punctuation">:</span>unselectColor<span class="token punctuation">,</span>NSFontAttributeName<span class="token punctuation">:</span><span class="token punctuation">[</span>UIFont fontWithName<span class="token punctuation">:</span>fontName size<span class="token punctuation">:</span>size<span class="token punctuation">]</span><span class="token punctuation">}</span> forState<span class="token punctuation">:</span>UIControlStateNormal<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 选中字体颜色</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span>UITabBarItem appearance<span class="token punctuation">]</span> setTitleTextAttributes<span class="token punctuation">:</span><span class="token operator">@</span><span class="token punctuation">{</span>NSForegroundColorAttributeName<span class="token punctuation">:</span>selectColor<span class="token punctuation">,</span>NSFontAttributeName<span class="token punctuation">:</span><span class="token punctuation">[</span>UIFont fontWithName<span class="token punctuation">:</span>fontName size<span class="token punctuation">:</span>size<span class="token punctuation">]</span><span class="token punctuation">}</span> forState<span class="token punctuation">:</span>UIControlStateSelected<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后对每个子ViewController进行自定义即可，如BlogViewController.h可以这样写：</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code><span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>viewDidLoad <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewDidLoad<span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    UIButton <span class="token operator">*</span>helloBtn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>UIButton alloc<span class="token punctuation">]</span> initWithFrame<span class="token punctuation">:</span><span class="token function">CGRectMake</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> SCREEN_WIDTH <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    helloBtn<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token punctuation">[</span>UIColor redColor<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>helloBtn setTitle<span class="token punctuation">:</span><span class="token string">@&quot;hello world&quot;</span> forState<span class="token punctuation">:</span>UIControlStateNormal<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>helloBtn addTarget<span class="token punctuation">:</span><span class="token keyword">self</span> action<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>showToast<span class="token punctuation">)</span> forControlEvents<span class="token punctuation">:</span>UIControlEventTouchUpInside<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>view addSubview<span class="token punctuation">:</span>helloBtn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>showToast<span class="token punctuation">{</span>
    <span class="token comment">// 打开新ViewController</span>
    BlogDetailViewController <span class="token operator">*</span>blogDetail <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>BlogDetailViewController alloc<span class="token punctuation">]</span> init<span class="token punctuation">]</span><span class="token punctuation">;</span>
    blogDetail<span class="token punctuation">.</span>hidesBottomBarWhenPushed<span class="token operator">=</span>YES<span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>navigationController pushViewController<span class="token punctuation">:</span>blogDetail animated<span class="token punctuation">:</span>YES<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>本文源代码：https://github.com/zhaomenghuan/learn-ios/tree/master/example/UITabBarController</p></blockquote> <h2 id="参考">参考</h2> <p><a href="http://blog.csdn.net/yang198907/article/details/49807011" target="_blank" rel="noopener noreferrer">iOS －App主流框架UINavigationController &amp;&amp; UITabBarController的简单使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div data-v-3bd334e8><p class="descript" data-v-3bd334e8>写这些代码也许就一两个小时的事，写一篇大家好接受的文章需要几天的酝酿，如果文章对您有帮助请我喝杯咖啡吧！</p> <img src="/supportme.png" class="pay-code" data-v-3bd334e8> <div data-v-3bd334e8><div id="container"></div></div> <div class="footer" data-v-4f0df4b0 data-v-3bd334e8><p data-v-4f0df4b0>站点总访问量： 站点总访客数：</p> <p data-v-4f0df4b0>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" data-v-4f0df4b0>知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></p> <p data-v-4f0df4b0>赵梦欢 © 2015 - 2023</p></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.f3e141ba.js" defer></script><script src="/assets/js/70.80f1252b.js" defer></script><script src="/assets/js/18.c373a36e.js" defer></script><script src="/assets/js/34.124c31c0.js" defer></script>
  </body>
</html>
