<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux CentOS7 搭建 node 服务详细教程 | 匠心博客</title>
    <meta name="description" content="小青年,匠心,小青年博客,匠心博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.685c010a.css" as="style"><link rel="preload" href="/assets/js/app.f3e141ba.js" as="script"><link rel="preload" href="/assets/js/73.674106d1.js" as="script"><link rel="preload" href="/assets/js/18.c373a36e.js" as="script"><link rel="preload" href="/assets/js/34.124c31c0.js" as="script"><link rel="prefetch" href="/assets/js/1.1950ec81.js"><link rel="prefetch" href="/assets/js/10.7f857e71.js"><link rel="prefetch" href="/assets/js/100.e03c01d2.js"><link rel="prefetch" href="/assets/js/101.7b790a2f.js"><link rel="prefetch" href="/assets/js/102.a7aa77f9.js"><link rel="prefetch" href="/assets/js/103.d473991c.js"><link rel="prefetch" href="/assets/js/104.9fe8785c.js"><link rel="prefetch" href="/assets/js/105.7291ae49.js"><link rel="prefetch" href="/assets/js/106.2c35a2f4.js"><link rel="prefetch" href="/assets/js/107.a71ccb64.js"><link rel="prefetch" href="/assets/js/108.9d6f54a8.js"><link rel="prefetch" href="/assets/js/109.e77d12ca.js"><link rel="prefetch" href="/assets/js/11.5378ae65.js"><link rel="prefetch" href="/assets/js/12.9aca40f8.js"><link rel="prefetch" href="/assets/js/13.ce2b655c.js"><link rel="prefetch" href="/assets/js/14.7488ca24.js"><link rel="prefetch" href="/assets/js/15.9c07ac98.js"><link rel="prefetch" href="/assets/js/16.8f57294c.js"><link rel="prefetch" href="/assets/js/17.4f7ae4ec.js"><link rel="prefetch" href="/assets/js/19.c7be2474.js"><link rel="prefetch" href="/assets/js/2.7f7e5268.js"><link rel="prefetch" href="/assets/js/20.f8833113.js"><link rel="prefetch" href="/assets/js/21.e71dd521.js"><link rel="prefetch" href="/assets/js/22.92dc7b77.js"><link rel="prefetch" href="/assets/js/23.285557d3.js"><link rel="prefetch" href="/assets/js/24.a803551c.js"><link rel="prefetch" href="/assets/js/25.dbeaa19d.js"><link rel="prefetch" href="/assets/js/26.9ca97076.js"><link rel="prefetch" href="/assets/js/27.d1a2911b.js"><link rel="prefetch" href="/assets/js/28.25c216b3.js"><link rel="prefetch" href="/assets/js/29.9dc30af4.js"><link rel="prefetch" href="/assets/js/30.1e9d6e06.js"><link rel="prefetch" href="/assets/js/31.3d7dbe62.js"><link rel="prefetch" href="/assets/js/32.36371ba7.js"><link rel="prefetch" href="/assets/js/33.78edc66d.js"><link rel="prefetch" href="/assets/js/35.a5470008.js"><link rel="prefetch" href="/assets/js/36.acde7543.js"><link rel="prefetch" href="/assets/js/37.f6648812.js"><link rel="prefetch" href="/assets/js/38.1885784f.js"><link rel="prefetch" href="/assets/js/39.af4b4bbd.js"><link rel="prefetch" href="/assets/js/4.61024115.js"><link rel="prefetch" href="/assets/js/40.ec6e88a9.js"><link rel="prefetch" href="/assets/js/41.67d4e8b7.js"><link rel="prefetch" href="/assets/js/42.7de428af.js"><link rel="prefetch" href="/assets/js/43.b4f51fa8.js"><link rel="prefetch" href="/assets/js/44.487d119d.js"><link rel="prefetch" href="/assets/js/45.2206665b.js"><link rel="prefetch" href="/assets/js/46.125163cc.js"><link rel="prefetch" href="/assets/js/47.8722f507.js"><link rel="prefetch" href="/assets/js/48.b8bfe77f.js"><link rel="prefetch" href="/assets/js/49.77fac897.js"><link rel="prefetch" href="/assets/js/5.3395f0b5.js"><link rel="prefetch" href="/assets/js/50.d68289a2.js"><link rel="prefetch" href="/assets/js/51.d9d70556.js"><link rel="prefetch" href="/assets/js/52.6a2c9e02.js"><link rel="prefetch" href="/assets/js/53.ff13cf8b.js"><link rel="prefetch" href="/assets/js/54.7e844902.js"><link rel="prefetch" href="/assets/js/55.80aa3d86.js"><link rel="prefetch" href="/assets/js/56.a4124774.js"><link rel="prefetch" href="/assets/js/57.55eb7355.js"><link rel="prefetch" href="/assets/js/58.7d0e2bc5.js"><link rel="prefetch" href="/assets/js/59.9cdd695c.js"><link rel="prefetch" href="/assets/js/6.77e8533c.js"><link rel="prefetch" href="/assets/js/60.54318be9.js"><link rel="prefetch" href="/assets/js/61.82e1ea82.js"><link rel="prefetch" href="/assets/js/62.b065e499.js"><link rel="prefetch" href="/assets/js/63.bb770dde.js"><link rel="prefetch" href="/assets/js/64.996fdbfd.js"><link rel="prefetch" href="/assets/js/65.54f3baf3.js"><link rel="prefetch" href="/assets/js/66.38d28ab3.js"><link rel="prefetch" href="/assets/js/67.5cf5a3bc.js"><link rel="prefetch" href="/assets/js/68.f2418476.js"><link rel="prefetch" href="/assets/js/69.162d06c4.js"><link rel="prefetch" href="/assets/js/7.a2cd9d6c.js"><link rel="prefetch" href="/assets/js/70.80f1252b.js"><link rel="prefetch" href="/assets/js/71.970dda3c.js"><link rel="prefetch" href="/assets/js/72.a073c997.js"><link rel="prefetch" href="/assets/js/74.a0336873.js"><link rel="prefetch" href="/assets/js/75.37fbb329.js"><link rel="prefetch" href="/assets/js/76.a9439343.js"><link rel="prefetch" href="/assets/js/77.d52439f1.js"><link rel="prefetch" href="/assets/js/78.fbffcd6c.js"><link rel="prefetch" href="/assets/js/79.c6d73001.js"><link rel="prefetch" href="/assets/js/8.f0af9f9c.js"><link rel="prefetch" href="/assets/js/80.eab87966.js"><link rel="prefetch" href="/assets/js/81.9931436f.js"><link rel="prefetch" href="/assets/js/82.b29080c9.js"><link rel="prefetch" href="/assets/js/83.d94ed517.js"><link rel="prefetch" href="/assets/js/84.600be30f.js"><link rel="prefetch" href="/assets/js/85.a6938cc3.js"><link rel="prefetch" href="/assets/js/86.7dec6ed4.js"><link rel="prefetch" href="/assets/js/87.5d2c1dc9.js"><link rel="prefetch" href="/assets/js/88.8f2410d4.js"><link rel="prefetch" href="/assets/js/89.fe8c04e8.js"><link rel="prefetch" href="/assets/js/9.f542ab97.js"><link rel="prefetch" href="/assets/js/90.f25166a8.js"><link rel="prefetch" href="/assets/js/91.038ee701.js"><link rel="prefetch" href="/assets/js/92.19e610e0.js"><link rel="prefetch" href="/assets/js/93.22cd83c8.js"><link rel="prefetch" href="/assets/js/94.7495cfa6.js"><link rel="prefetch" href="/assets/js/95.f149c41d.js"><link rel="prefetch" href="/assets/js/96.cee91e1f.js"><link rel="prefetch" href="/assets/js/97.27a1bb57.js"><link rel="prefetch" href="/assets/js/98.67d4f125.js"><link rel="prefetch" href="/assets/js/99.35daa60c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.685c010a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">匠心博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Linux CentOS7 搭建 node 服务详细教程</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/linux-centos7-node-server.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#登录-linux-云服务器" class="sidebar-link">登录 Linux 云服务器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-系统目录结构" class="sidebar-link">Linux 系统目录结构</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-文件基本属性" class="sidebar-link">Linux 文件基本属性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-文件与目录管理" class="sidebar-link">Linux 文件与目录管理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-磁盘管理" class="sidebar-link">Linux 磁盘管理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-vim" class="sidebar-link">Linux vim</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-yum-包管理器" class="sidebar-link">Linux Yum 包管理器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#安装及启动-nginx" class="sidebar-link">安装及启动 nginx</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-源码编译安装-node-js" class="sidebar-link">Linux 源码编译安装 node.js</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#通过-filezilla-实现本地-windows-上传文件到-linux-服务器-从-linux-服务器下载文件" class="sidebar-link">通过 Filezilla 实现本地 Windows 上传文件到 Linux 服务器/从 Linux 服务器下载文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-nginx-ssl-证书部署" class="sidebar-link">Linux Nginx ssl 证书部署</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#linux-node-服务-nginx-配置" class="sidebar-link">Linux node 服务 nginx 配置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#nginx-配置一些常见问题" class="sidebar-link">nginx 配置一些常见问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/linux-centos7-node-server.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="linux-centos7-搭建-node-服务详细教程">Linux CentOS7 搭建 node 服务详细教程</h1> <h2 id="前言">前言</h2> <p>近期在准备搭建一个 vue.js+node.js 全栈开发的社区，之前由于没有云服务器搭建经验，这篇文章做一下相关的记录，后续再深入学习研究。本文不局限于只是流水账式的记录，会顺便说明一下 Linux 的相关内容。</p> <h2 id="登录-linux-云服务器">登录 Linux 云服务器</h2> <p>至于购买云服务的过程在此不做赘述，各大云服务提供商都有相关的说明文档。当我们买好了云主机，可以通过控制面板登录，也可以使用密码从本地登录。</p> <p>Linux 或 Mac OS 用户登录 Linux 云服务器，直接使用 SSH 命令进行连接，如：ssh root@Linux 云服务器公网 IP，然后输入 root 用户的初始密码，即可完成登录。</p> <p>Window 系统上 Linux 远程登录客户端有 SecureCRT, Putty, SSH Secure Shell 等，本文以 Putty 为例来登录远程服务器。</p> <p>下载远程链接软件 Putty，参考下载地址：<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank" rel="noopener noreferrer">http://www.chiark.greenend.org.uk/~sgtatham/putty/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>打开 Putty 客户端，在 PuTTY Configuration 窗口中输入以下内容：
Host Name：Linux 云服务器的公网 IP。
Port：云服务器的端口，必须填 22。（请确保云主机 22 端口已开放）
Connect type：选择“SSH”。</p> <p>全部输入完后，点击“Open”，创建一个新对话。</p> <p><img src="https://mccdn.qcloud.com/img56a5d38a4ffbc.png" alt></p> <p>在 Putty 会话窗口中， 输入管理员帐号，按回车键。再输入初始密码，回车完成登录过程。</p> <p><img src="https://mccdn.qcloud.com/img56a5d47b8b5da.png" alt></p> <h2 id="linux-系统目录结构">Linux 系统目录结构</h2> <p>登录系统后，在当前命令窗口下输入命令：</p> <div class="language-js extra-class"><pre class="language-js"><code>ls <span class="token operator">/</span>
</code></pre></div><p>结果如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>root@centos <span class="token operator">~</span><span class="token punctuation">]</span># ls <span class="token operator">/</span>
bin   data  etc   lib    lost<span class="token operator">+</span>found  mnt  proc  run   srv  tmp  <span class="token keyword">var</span>
boot  dev   home  lib64  media       opt  root  sbin  sys  usr
</code></pre></div><p>树状目录结构：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-f6dd3886db0687d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p> <p>以下是对这些目录的解释：
<strong>/bin</strong>：bin 是 Binary 的缩写, 这个目录存放着最经常使用的命令。
<strong>/boot</strong>：这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。
<strong>/dev</strong>：dev 是 Device(设备)的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。
<strong>/etc</strong>：这个目录用来存放所有的系统管理所需要的配置文件和子目录。
<strong>/home</strong>：用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
<strong>/lib</strong>：这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。
<strong>/lost+found</strong>：这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
<strong>/media</strong>：linux 系统会自动识别一些设备，例如 U 盘、光驱等等，当识别后，linux 会把识别的设备挂载到这个目录下。
<strong>/mnt</strong>：系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。
<strong>/opt</strong>：这是给主机额外安装软件所摆放的目录。比如你安装一个 ORACLE 数据库则就可以放到这个目录下。默认是空的。
<strong>/proc</strong>：这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的 ping 命令，使别人无法 ping 你的机器：</p> <div class="language-js extra-class"><pre class="language-js"><code>echo <span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token operator">/</span>proc<span class="token operator">/</span>sys<span class="token operator">/</span>net<span class="token operator">/</span>ipv4<span class="token operator">/</span>icmp_echo_ignore_all
</code></pre></div><ul><li><strong>/root</strong>：该目录为系统管理员，也称作超级权限者的用户主目录。</li> <li><strong>/sbin</strong>：s 就是 Super User 的意思，这里存放的是系统管理员使用的系统管理程序。</li> <li><strong>/selinux</strong>：这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放 selinux 相关的文件的。</li> <li><strong>/srv</strong>：该目录存放一些服务启动之后需要提取的数据。</li> <li><strong>/sys</strong>：这是 linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。sysfs 文件系统集成了下面 3 种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。</li> <li><strong>/tmp</strong>：这个目录是用来存放一些临时文件的。</li> <li><strong>/usr</strong>：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与 windows 下的 program files 目录。</li> <li><strong>/usr/bin</strong>：系统用户使用的应用程序。</li> <li><strong>/usr/sbin</strong>：超级用户使用的比较高级的管理程序和系统守护程序。</li> <li><strong>/usr/src</strong>：内核源代码默认的放置目录。</li> <li><strong>/var</strong>：这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。</li></ul> <p>在 linux 系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。</p> <ul><li><strong>/etc</strong>： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。</li> <li><strong>/bin, /sbin, /usr/bin, /usr/sbin</strong>: 这是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。值得提出的是，/bin, /usr/bin 是给系统用户使用的指令（除 root 外的通用户），而/sbin, /usr/sbin 则是给 root 使用的指令。</li> <li><strong>/var</strong>： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在/var/log 目录下，另外 mail 的预设放置也是在这里。</li></ul> <p>了解系统目录结构，对于我们安装管理一些依赖包更加清晰。</p> <h2 id="linux-文件基本属性">Linux 文件基本属性</h2> <p>Linux 系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。为了保护系统的安全性，Linux 系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</p> <p>在 Linux 中我们可以使用 ll 或者<code>ls –l</code>命令来显示一个文件的属性以及文件所属的用户和组，如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>root@VM_195_14_centos <span class="token operator">~</span><span class="token punctuation">]</span># ls <span class="token operator">-</span>l
total <span class="token number">4</span>
<span class="token operator">-</span>rw<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">.</span> <span class="token number">1</span> root root <span class="token number">2523</span> Apr <span class="token number">21</span>  <span class="token number">2016</span> anaconda<span class="token operator">-</span>ks<span class="token punctuation">.</span>cfg
</code></pre></div><p>实例中，anaconda-ks.cfg 文件的第一个属性用&quot;-&quot;表示，&quot;-&quot;在 Linux 中代表该文件是一个文件。</p> <p>在 Linux 中第一个字符代表这个文件是目录、文件或链接文件，对应规则如下：</p> <ul><li>当为[d]则是目录</li> <li>当为[-]则是文件；</li> <li>若是[l]则表示为链接文档(link file)；</li> <li>若是[b]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；</li> <li>若是[c]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。</li></ul> <p>接下来的字符中，以三个为一组，且均为『rwx』 的三个参数的组合。其中，[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]而已。</p> <p>每个文件的属性由左边第一部分的 10 个字符来确定，如下图：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-a03a98765e603fb4.png" alt></p> <h2 id="linux-文件与目录管理">Linux 文件与目录管理</h2> <p>Linux 的目录结构为树状结构，最顶级的目录为根目录 /。</p> <p>绝对路径：从根目录 / 写起，如：/usr/share/applications
相对路径：使用../或~（/root 的简称）。</p> <p>处理目录的常用命令：</p> <ul><li>ls: 列出目录</li> <li>cd：切换目录</li> <li>pwd：显示目前的目录</li> <li>mkdir：创建一个新的目录</li> <li>rmdir：删除一个空的目录</li> <li>cp: 复制文件或目录</li> <li>rm: 移除文件或目录</li></ul> <p>注：可以使用 man [命令] 来查看各个命令的使用文档，如 ：man cp。</p> <p>文件内容查看的命令：</p> <ul><li>cat 由第一行开始显示文件内容</li> <li>tac 从最后一行开始显示，可以看出 tac 是 cat 的倒著写！</li> <li>nl 显示的时候，顺道输出行号！</li> <li>more 一页一页的显示文件内容</li> <li>less 与 more 类似，但是比 more 更好的是，他可以往前翻页！</li> <li>head 只看头几行</li> <li>tail 只看尾巴几行</li></ul> <h2 id="linux-磁盘管理">Linux 磁盘管理</h2> <p>inux 磁盘管理常用三个命令为 df、du 和 fdisk。</p> <ul><li>df：列出文件系统的整体磁盘使用量</li> <li>du：检查磁盘空间使用量</li> <li>fdisk：用于磁盘分区</li></ul> <p><strong>df 命令</strong>
df 命令参数功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>df <span class="token punctuation">[</span><span class="token operator">-</span>ahikHTm<span class="token punctuation">]</span> <span class="token punctuation">[</span>目录或文件名<span class="token punctuation">]</span>
</code></pre></div><p>选项与参数：
-a ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；
-k ：以 KBytes 的容量显示各文件系统；
-m ：以 MBytes 的容量显示各文件系统；
-h ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；
-H ：以 M=1000K 取代 M=1024K 的进位方式；
-T ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；
-i ：不用硬盘容量，而以 inode 的数量来显示</p> <p><strong>du 命令</strong>
Linux du 命令也是查看使用空间的，但是与 df 命令不同的是 Linux du 命令是对文件和目录磁盘使用的空间的查看，还是和 df 命令有一些区别的，这里介绍 Linux du 命令。语法：
du [-ahskm] 文件或目录名称选项与参数：
-a ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。
-h ：以人们较易读的容量格式 (G/M) 显示；
-s ：列出总量而已，而不列出每个各别的目录占用容量；
-S ：不包括子目录下的总计，与 -s 有点差别。
-k ：以 KBytes 列出容量显示；
-m ：以 MBytes 列出容量显示；</p> <h2 id="linux-vim">Linux vim</h2> <p>Vim 是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。 vim 则可以说是程序开发者的一项很好用的工具。</p> <p><a href="http://www.runoob.com/w3cnote/all-vim-cheatsheat.html" target="_blank" rel="noopener noreferrer">史上最全 Vim 快捷键键位图（入门到进阶）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-1fe0b909665b1f09.png" alt></p> <p><strong>打开文件的命令</strong></p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-43dee391c6bf6a74.png" alt></p> <p>基本上 vim 共分为三种模式，分别是命令模式（Command mode），插入模式（Insert mode）和末行模式（Last line mode）。 这三种模式的作用分别是：命令模式、输入模式、末行模式。</p> <p><strong>vi/vim 三种模式切换</strong></p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-8a3e2e194c142040.png" alt="vi/vim三种模式切换"></p> <p><strong>命令模式</strong>
用户刚刚启动 vi/vim，便进入了命令模式。此状态下敲击键盘动作会被 Vim 识别为命令，而非输入字符。比如我们此时按下 i，并不会输入一个字符，i 被当作了一个命令。</p> <p>以下是常用的几个命令：
i 切换到插入模式，以输入字符。
x 删除当前光标所在处的字符。
: 切换到底线命令模式，以在最底一行输入命令。</p> <p>若想要编辑文本：启动 Vim，进入了命令模式，按下 i，切换到输入模式。命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。</p> <p>移动光标的位置：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-6ef7c0c3957760d3.png" alt></p> <p>字符串的复制、删除、粘贴：</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-6872cedbde22d898.png" alt></p> <p><strong>输入模式</strong>
在命令模式下按下 i、I、a、A、o、O、r 和 R 中的某一个键就进入了输入模式。在输入模式中，可以使用以下按键：字符按键以及 Shift 组合，输入字符
ENTER，回车键，换行
BACK SPACE，退格键，删除光标前一个字符
DEL，删除键，删除光标后一个字符方向键，在文本中移动光标
HOME/END，移动光标到行首/行尾
Page Up/Page Down，上/下翻页
Insert，切换光标为输入/替换模式，光标将变成竖线/下划线
ESC，退出输入模式，切换到命令模式</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-bd165fe4e4f95459.png" alt></p> <p><strong>末行模式</strong>
在命令模式下按下<code>:</code>（英文冒号）就进入了底线命令模式。末行模式可以输入单个或多个字符的命令，可用的命令非常多。在末行模式中，基本的命令有：：q 退出程序：w 保存文件按 ESC 键可随时退出底线命令模式。</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-0ee150287b6c2bcd.png" alt></p> <p><strong>vim 的保存文件和退出命令</strong></p> <p>:w —— 保存编辑后的文件内容，但不退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据写到启动 vim 时指定的文件中。
:w! —— 强制写文件，即强制覆盖原有文件。如果原有文件的访问权限不允许写入文件，例如，原有的文件为只读文件，则可使用这个命令强制写入。但是，这种命令用法仅当用户是文件的属主时才适用，而超级用户则不受此限制。
:wq —— 保存文件内容后退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据写到启动 vim 时指定的文件中，然后退出 vim 编辑器。另外一种替代的方法是用 ZZ 命令。
:wq! —— 强制保存文件内容后退出 vim 编辑器。这个命令的作用是把内存缓冲区中的数据强制写到启动 vim 时指定的文件中，然后退出 vim 编辑器。
ZZ —— 使用 ZZ 命令时，如果文件已经做过编辑处理，则把内存缓冲区中的数据写到启动 vim 时指定的文件中，然后退出 vim 编辑器。否则只是退出 vim 而已。注意，ZZ 命令前面无需加冒号“：”，也无需按 Enter 键。
:q —— 在未做任何编辑处理而准备退出 vim 时，可以使用此命令。如果已做过编辑处理，则 vim 不允许用户使用“:q”命令退出，同时还会输出下列警告信息：No write since last change (:quit! overrides)
:q! —— 强制退出 vim 编辑器，放弃编辑处理的结果。如果确实不需要保存修改后的文件内容，可输入“:q!”命令，强行退出 vim 编辑器。
:w filename —— 把编辑处理后的结果写到指定的文件中保存
:w! filename —— 把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有的文件。
:wq! filename —— 把编辑处理后的结果强制保存到指定的文件中，如果文件已经存在，则覆盖现有文件，并退出 vim 编辑器。</p> <h2 id="linux-yum-包管理器">Linux Yum 包管理器</h2> <blockquote><p>Yum（全称为 Yellow dog Updater, Modified）是一个在 Fedora 和 RedHat 以及 CentOS 中的<a href="http://baike.baidu.com/item/Shell" target="_blank" rel="noopener noreferrer">Shell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>前端软件包管理器。基于<a href="http://baike.baidu.com/item/RPM" target="_blank" rel="noopener noreferrer">RPM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。</p></blockquote> <p><strong>yum 语法</strong></p> <div class="language- extra-class"><pre class="language-text"><code>yum [options] [command] [package ...]
</code></pre></div><ul><li>options：可选，选项包括-h（帮助），-y（当安装过程提示选择全部为&quot;yes&quot;），-q（不显示安装的过程）等等。</li> <li>command：要进行的操作。</li> <li>package 操作的对象。</li></ul> <p><strong>yum 常用命令</strong></p> <ul><li>1.列出所有可更新的软件清单命令：<code>yum check-update</code></li> <li>2.更新所有软件命令：<code>yum update</code></li> <li>3.仅安装指定的软件命令：<code>yum install &lt;package_name&gt;</code></li> <li>4.仅更新指定的软件命令：<code>yum update &lt;package_name&gt;</code></li> <li>5.列出所有可安裝的软件清单命令：<code>yum list</code></li> <li>6.删除软件包命令：<code>yum remove &lt;package_name&gt;</code></li> <li>7.查找软件包 命令：<code>yum search &lt;keyword&gt;</code></li> <li>8.清除缓存命令:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>yum clean packages<span class="token operator">:</span> 清除缓存目录下的软件包
yum clean headers<span class="token operator">:</span> 清除缓存目录下的 headers
yum clean oldheaders<span class="token operator">:</span> 清除缓存目录下旧的 headers
yum clean<span class="token punctuation">,</span> yum clean <span class="token function">all</span> <span class="token punctuation">(</span><span class="token operator">=</span> yum clean packages<span class="token punctuation">;</span> yum clean oldheaders<span class="token punctuation">)</span> <span class="token operator">:</span>清除缓存目录下的软件包及旧的 headers
</code></pre></div><h2 id="安装及启动-nginx">安装及启动 nginx</h2> <p>Nginx (“engine x”) 是一个高性能的 HTTP 和   反向代理服务器，也是一个 IMAP/POP3/SMTP  代理服务器。具有很有特性：</p> <ul><li><strong>热部署</strong>：在 master 管理进程与 worker 工作进程的分离设计，使的 Nginx 具有热部署的功能，那么在 7×24 小时不间断服务的前提下，升级 Nginx 的可执行文件。也可以在不停止服务的情况下修改配置文件，更换日志文件等功能。</li> <li><strong>可以高并发连接</strong>：理论上，Nginx 支持的并发连接上限取决于你的内存，10 万远未封顶。</li> <li><strong>低的内存消耗</strong>：在一般的情况下，10000 个非活跃的 HTTP Keep-Alive 连接在 Nginx 中仅消耗 2.5M 的内存，这也是 Nginx 支持高并发连接的基础。</li> <li><strong>处理响应请求很快</strong>：在正常的情况下，单次请求会得到更快的响应。在高峰期，Nginx 可以比其他的 Web 服务器更快的响应请求。</li> <li><strong>具有很高的可靠性</strong>：高可靠性来自其核心框架代码的优秀设计、模块设计的简单性；并且这些模块都非常的稳定。</li></ul> <p>yum 安装：</p> <div class="language- extra-class"><pre class="language-text"><code>yum install  -y nginx
</code></pre></div><p>启动 nginx 服务：</p> <div class="language- extra-class"><pre class="language-text"><code>service nginx start
</code></pre></div><p>测试 nginx 服务：</p> <div class="language-js extra-class"><pre class="language-js"><code>wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
</code></pre></div><p>若结果如下，说明 nginx 服务正常。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>root@VM_195_14_centos <span class="token operator">~</span><span class="token punctuation">]</span># wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>
<span class="token operator">--</span><span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">34</span><span class="token operator">--</span>  http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">127.0.0.1</span><span class="token regex-delimiter">/</span></span>
Connecting to <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">80.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> connected<span class="token punctuation">.</span>
<span class="token constant">HTTP</span> request sent<span class="token punctuation">,</span> awaiting response<span class="token operator">...</span> <span class="token number">200</span> <span class="token constant">OK</span>
<span class="token literal-property property">Length</span><span class="token operator">:</span> <span class="token number">3700</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">.</span>6K<span class="token punctuation">)</span> <span class="token punctuation">[</span>text<span class="token operator">/</span>html<span class="token punctuation">]</span>
Saving to<span class="token operator">:</span> <span class="token string">'index.html'</span>

<span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">[</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">700</span>       <span class="token operator">--</span><span class="token punctuation">.</span><span class="token operator">-</span><span class="token constant">K</span><span class="token operator">/</span>s   <span class="token keyword">in</span> 0s

<span class="token number">2017</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">20</span><span class="token operator">:</span><span class="token number">32</span><span class="token operator">:</span><span class="token number">34</span> <span class="token punctuation">(</span><span class="token number">632</span> <span class="token constant">MB</span><span class="token operator">/</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'index.html'</span> saved <span class="token punctuation">[</span><span class="token number">3700</span><span class="token operator">/</span><span class="token number">3700</span><span class="token punctuation">]</span>
</code></pre></div><p>在浏览器中，访问通过 CentOS 云服务器公网 IP 查看 nginx 服务是否正常运行。</p> <p><strong>nginx 服务器命令</strong></p> <ul><li>启动 nginx：service nginx start</li> <li>访问（nginx 默认是 80 端口）：curl 127.0.0.1</li> <li>nginx 配置文件目录：nginx -t</li> <li>重启 nginx：service nginx restart</li> <li>停用 nginx：service nginx stop</li></ul> <h2 id="linux-源码编译安装-node-js">Linux 源码编译安装 node.js</h2> <p>开篇说了我会尝试建立一个 vue.js+node.js 全栈开发的交流社区，自然这个站点会基于 node.js 构建后端。</p> <p>Linux 下 node 有多种安装方式，这里我们手工安装官方最新版本。</p> <p><strong>1.安装编译环境</strong></p> <p>我的 CentOS 版本是 7.2，安装前先安装编译环境，如 gcc 编译器：</p> <div class="language-js extra-class"><pre class="language-js"><code>yum install <span class="token operator">-</span>y gcc gcc<span class="token operator">-</span>c<span class="token operator">++</span> openssl<span class="token operator">-</span>devel
</code></pre></div><p>然后执行<code>gcc -v</code>运行正常：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">...</span>
gcc version <span class="token number">4.8</span><span class="token number">.5</span> <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span><span class="token number">.5</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">GCC</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>2.检查和核对 Python 版本</strong>
Node.js 环境需要 Python2.6 以上，我们需要检查，如果不是则需要安装和升级最新版 Python。</p> <div class="language-python extra-class"><pre class="language-python"><code>python
</code></pre></div><p>退出 python 命令行使用 exit() 命令或者 Ctrl-D 快捷键。</p> <p><strong>3.安装最新版本 Node.js</strong></p> <p>我们将我们的 node 下载到/usr/local/src 文件夹下进行安装：</p> <div class="language-js extra-class"><pre class="language-js"><code>cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src
</code></pre></div><p>下载：</p> <div class="language-js extra-class"><pre class="language-js"><code>wget http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>org<span class="token operator">/</span>dist<span class="token operator">/</span>node<span class="token operator">-</span>latest<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz
</code></pre></div><p>解压：</p> <div class="language- extra-class"><pre class="language-text"><code>tar -zxvf node-latest.tar.gz
</code></pre></div><p>进入当前版本进行编译，先通过 ls 查询解压的文件夹名：</p> <div class="language- extra-class"><pre class="language-text"><code>[root@VM_195_14_centos src]# ls
node-latest.tar.gz  node-v7.10.0
</code></pre></div><p>然后进入 node-v7.10.0 文件夹进行安装：</p> <div class="language- extra-class"><pre class="language-text"><code>cd node-v0.12.7
./configure
make &amp;&amp; make install
</code></pre></div><p>然后检查 node 是否正确安装：</p> <div class="language- extra-class"><pre class="language-text"><code>node -v
</code></pre></div><p>如果正确打印出版本则正确安装。</p> <h2 id="通过-filezilla-实现本地-windows-上传文件到-linux-服务器-从-linux-服务器下载文件">通过 Filezilla 实现本地 Windows 上传文件到 Linux 服务器/从 Linux 服务器下载文件</h2> <p>本方法仅适合本地为 Windows 系统的用户，可实现将本地文件上传至 Linux 服务器/下载 Linux 服务器上的文件。本地为 Linux 系统的用户可直接使用 SCP 命令进行上传下载。本地安装 Filezilla 客户端，参考下载地址：<a href="https://www.filezilla.cn/download/client" target="_blank" rel="noopener noreferrer">https://www.filezilla.cn/download/client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>点击【文件】-【站点管理器】，点击【新站点】按钮，输入以下内容：
<img src="https://mccdn.qcloud.com/static/img/58132d70663ac9ce5169462eb9ccb944/image.png" alt>
主机：Linux 云服务器的公网 IP
端口：远程连接端口，默认 22
协议：选择【SFTP】ssh 文件传输协议登录类型：选择正常用户：Linux 云服务器的登录用户，默认为 root/ubuntu
密码：Linux 云服务器的登录密码</p> <p>点击【连接】按钮，等待连接 Linux 云服务器。
<img src="https://mccdn.qcloud.com/static/img/6653190a5e08b34c83d1f3d9ed9a84f6/image.png" alt>
连接成功后，左侧为本地文件，右侧为服务器端文件。需要上传本地文件至服务器时，在左侧需要上传的文件上右键单击【上传】按钮，文件即可上传到右侧服务器文件目录下；需要下载服务器文件至本地时，在右侧需要下载的文件上右键单击【下载】按钮，文件即可下载到左侧本地文件目录下；</p> <h2 id="linux-nginx-ssl-证书部署">Linux Nginx ssl 证书部署</h2> <p>我是在腾讯云上部署的，在这里申请免费的 SSL 证书：<a href="https://console.qcloud.com/ssl" target="_blank" rel="noopener noreferrer">申请免费证书<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。申请完了后下载证书然后可以利用上面说的 Filezilla 上传到服务器上，参考这里的文档<a href="https://www.qcloud.com/document/product/400/4143#2.-nginx-.E8.AF.81.E4.B9.A6.E9.83.A8.E7.BD.B2" target="_blank" rel="noopener noreferrer">Nginx 证书部署<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <ul><li>下载解压证书，Nginx 文件夹内获得 SSL 证书文件 1_www.domain.com_bundle.crt 和私钥文件 2_www.domain.com.key,
1_www.domain.com_bundle.crt 文件包括两段证书代码 “-----BEGIN CERTIFICATE-----”和“-----END CERTIFICATE-----”,
2_www.domain.com.key 文件包括一段私钥代码“-----BEGIN RSA PRIVATE KEY-----”和“-----END RSA PRIVATE KEY-----”。</li> <li>将域名 www.domain.com 的证书文件 1_www.domain.com_bundle.crt 、私钥文件 2_www.domain.com.key 保存到同一个目录，例如/usr/share/nginx/conf 目录下。</li> <li>更新 Nginx 根目录下 conf/nginx.conf 文件。</li></ul> <p>这里重点说说更新 nginx.conf 文件，新手一般不知道 nginx.conf 的位置，这时候我们就需要使用 nginx -t 来查找 nginx 配置文件，并使用 vi 命令修改该配置文件，如下：</p> <div class="language- extra-class"><pre class="language-text"><code>[root@VM_195_14_centos ~]# nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre></div><p>打开 vim 修改 nginx.conf 文件：</p> <div class="language- extra-class"><pre class="language-text"><code>vim /etc/nginx/nginx.conf
</code></pre></div><p>主要修改 server：</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span> www.domain.com</span><span class="token punctuation">;</span> <span class="token comment">#填写绑定证书的域名</span>
  <span class="token directive"><span class="token keyword">ssl</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate</span> /usr/share/nginx/conf/1_www.domain.com_bundle.crt</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /usr/share/nginx/conf/2_www.domain.com.key</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">5m</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1 TLSv1.1 TLSv1.2</span><span class="token punctuation">;</span> <span class="token comment">#按照这个协议配置</span>
  <span class="token directive"><span class="token keyword">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE</span><span class="token punctuation">;</span><span class="token comment">#按照这个套件配置  </span>
  <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
  <span class="token comment">#其他不修改...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置完成后，正确无误的话，重启 nginx。就可以使 https://www.domain.com 来访问了。</p> <p>注：（配置关键字段）</p> <table><thead><tr><th style="text-align:center">配置文件参数</th> <th style="text-align:center">说明</th></tr></thead> <tbody><tr><td style="text-align:center">listen 443</td> <td style="text-align:center">SSL 访问端口号为 443</td></tr> <tr><td style="text-align:center">ssl on</td> <td style="text-align:center">启用 SSL 功能</td></tr> <tr><td style="text-align:center">ssl_certificate</td> <td style="text-align:center">证书文件</td></tr> <tr><td style="text-align:center">ssl_certificate_key</td> <td style="text-align:center">私钥文件</td></tr> <tr><td style="text-align:center">ssl_protocols</td> <td style="text-align:center">使用的协议</td></tr> <tr><td style="text-align:center">ssl_ciphers</td> <td style="text-align:center">配置加密套件，写法遵循 openssl 标准</td></tr></tbody></table> <h2 id="linux-node-服务-nginx-配置">Linux node 服务 nginx 配置</h2> <p>前面我们已经正确下载了 node 环境，这里我们写一个简单的 node 程序开启一个 node 服务。</p> <p><img src="http://upload-images.jianshu.io/upload_images/1945738-456d2a56f7fcc3f5.png" alt></p> <p>使用<code>vim /var/www/index.js</code>在/var/www 文件夹下建立一个 index.js，起一个最简单的服务。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node server is now running/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>nodejs 默认端口是 3000，需要配置 nginx 反向代理到 nodejs 的 3000 端口。</p> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">443</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">server_name</span>  www.domain.com</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate</span> /usr/share/nginx/conf/1_www.vuenode.com_bundle.crt</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /usr/share/nginx/conf/2_www.vuenode.com.key</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_session_timeout</span> <span class="token number">5m</span></span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_protocols</span> TLSv1 TLSv1.1 TLSv1.2</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE</span><span class="token punctuation">;</span>
  <span class="token directive"><span class="token keyword">ssl_prefer_server_ciphers</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>

  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:3000</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_http_version</span> 1.1</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Connection ‘upgrade’</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_cache_bypass</span> <span class="token variable">$http_upgrade</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后重启 nginx 及打开 node 服务：</p> <div class="language-js extra-class"><pre class="language-js"><code>service nginx restart
node <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>index
</code></pre></div><p>我们打开浏览器，页面页面会出现 hello world，至此我们的 node 服务已经搭建完成。这里需要说明的是我们容易产生一个误区的是 node 提供了 https 模块，我们在构建 node 服务的时候是使用 http 模块还是 https 模块，如果我们之间使用 node 做服务，不经过 nginx 反向代理，确实是可以使用 https 模块，不过这里我们使用了 nginx 对外部访问的时候是使用 https，服务器内部使用 http 模块即可。</p> <h2 id="nginx-配置一些常见问题">nginx 配置一些常见问题</h2> <blockquote><p>1.文件上传 413 请求实体太大错误</p></blockquote> <div class="language-nginx extra-class"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
  ...
  <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">200m</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>2.nginx配置多个服务</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>location / {
  proxy_pass http://127.0.0.1:8080/;	
}
	
location /aoss/ {
  proxy_pass http://127.0.0.1:3000/;	
}
</code></pre></div><h2 id="参考">参考</h2> <ul><li><a href="http://www.runoob.com/linux/linux-tutorial.html" target="_blank" rel="noopener noreferrer">Linux 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.tuicool.com/articles/NZz2ii" target="_blank" rel="noopener noreferrer">Linux 学习笔记：5.Vim 编辑器(2)：三种模式和命令<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.tuicool.com/articles/VV7nim6" target="_blank" rel="noopener noreferrer">我们为什么要用 nginx，nginx 的特点<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div data-v-3bd334e8><p class="descript" data-v-3bd334e8>写这些代码也许就一两个小时的事，写一篇大家好接受的文章需要几天的酝酿，如果文章对您有帮助请我喝杯咖啡吧！</p> <img src="/supportme.png" class="pay-code" data-v-3bd334e8> <div data-v-3bd334e8><div id="container"></div></div> <div class="footer" data-v-4f0df4b0 data-v-3bd334e8><p data-v-4f0df4b0>站点总访问量： 站点总访客数：</p> <p data-v-4f0df4b0>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" data-v-4f0df4b0>知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></p> <p data-v-4f0df4b0>赵梦欢 © 2015 - 2023</p></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.f3e141ba.js" defer></script><script src="/assets/js/73.674106d1.js" defer></script><script src="/assets/js/18.c373a36e.js" defer></script><script src="/assets/js/34.124c31c0.js" defer></script>
  </body>
</html>
